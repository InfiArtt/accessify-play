<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessify Play for NVDA</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.7;
            padding: 25px;
            max-width: 850px;
            margin: 0 auto;
            color: #333;
        }
        h1, h2, h3 {
            color: #1DB954; /* Spotify Green */
            border-bottom: 2px solid #1DB954;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        h1 {
            font-size: 2.5em;
            text-align: center;
            border-bottom: none;
            margin-bottom: 30px;
        }
        code {
            background-color: #e8e8e8;
            padding: 3px 7px;
            border-radius: 5px;
            font-family: "Courier New", Courier, monospace;
            font-size: 0.95em;
        }
        .warning, .premium-warning {
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 25px 0;
            background-color: #fffbeb;
        }
        .warning strong, .premium-warning strong {
            color: #d97706;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        ol li, ul li {
            margin-bottom: 12px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f7f7f7;
            font-weight: 600;
        }
        .container {
            background: #fff;
            padding: 20px 40px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .center {
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container">

    <h1>Accessify Play</h1>
    <p class="center"><strong>Your Spotify Universe, Commanded by NVDA.</strong></p>

    <p>Go beyond simple playback. Accessify Play transforms NVDA into a powerful command center for your entire Spotify experience. Control what's playing on <em>any</em> of your devicesâ€”your PC, phone, smart speaker, or consoleâ€”directly from your keyboard, without ever touching the Spotify app.</p>
    <p>Search, discover, manage playlists, and control your music with unparalleled freedom. This is how Spotify was meant to be experienced with a screen reader.</p>

    <div class="premium-warning">
        <strong>Important: Spotify Premium Required!</strong>
        <p>Due to Spotify API limitations, this addon requires an active <strong>Spotify Premium</strong> subscription for playback control features. Free accounts have restricted API access and will not work correctly with this addon.</p>
    </div>

    <h2>Prerequisites</h2>
    <ul>
        <li>An active <strong>Spotify Premium</strong> subscription.</li>
        <li>NVDA version <strong>2024.4</strong> or later.</li>
    </ul>

    <h2>A Note on Lyrics</h2>
    <p>This addon does not, and will not, include a feature to display song lyrics. Most methods for obtaining lyrics, such as scraping websites, are done without a proper license from the copyright holders. This is an illegal practice that violates the terms of service of lyrics providers and may infringe on copyright law, potentially leading to legal consequences under regulations like the DMCA (Digital Millennium Copyright Act) in the United States and similar laws worldwide. To ensure this addon remains legal, distributable, and respectful of copyright, this feature is intentionally omitted.</p>

    <h2>License</h2>
    <p>This addon is licensed under the <a href="https://www.gnu.org/licenses/gpl-2.0.html" target="_blank">GNU General Public License v2.0</a>.</p>

    <h2>Feature Universe</h2>
    <p>Accessify Play is packed with features, organized for your convenience:</p>
    
    <h3>Playback & Information</h3>
    <ul>
        <li><strong>Universal Control:</strong> Play, pause, skip, seek, and adjust volume on any active Spotify Connect device.</li>
        <li><strong>Set Specific Volume:</strong> Set the volume to a precise percentage (0-100) via a dialog.</li>
        <li><strong>Instant Info:</strong> Announce the currently playing track, artist, and album at any time.</li>
        <li><strong>Queue Insights:</strong> Announce the next track in your queue or open a full, interactive list of what's coming up.</li>
        <li><strong>Automatic Announcements:</strong> Optionally, have NVDA announce the new song automatically every time the track changes.</li>
        <li><strong>Share with Ease:</strong> Copy the Spotify URL of the current track to your clipboard.</li>
        <li><strong>Play from Link:</strong> Open a dialog to play any track directly from a Spotify URL.</li>
    </ul>

    <h3>Library Management & Interaction</h3>
    <ul>
        <li><strong>Quick Save:</strong> Instantly save the current track to your "Liked Songs" with a single command.</li>
        <li><strong>Add to Playlist:</strong> Quickly add the current track to any of your playlists.</li>
        <li><strong>Full Management Suite:</strong> Open a powerful multi-tabbed dialog to manage every aspect of your library:
            <ul>
                <li><strong>Playlists:</strong> Create new playlists, update details, delete them, and manage the tracks within.</li>
                <li><strong>Saved Library:</strong> View and remove tracks from your "Liked Songs".</li>
                <li><strong>Followed Artists:</strong> See all the artists you follow, with options to unfollow or explore their music.</li>
            </ul>
        </li>
    </ul>

    <h3>Discovery</h3>
    <ul>
        <li><strong>Advanced Search:</strong> A powerful search dialog to find songs, albums, artists, playlists, and podcasts.</li>
        <li><strong>Your Top Hits:</strong> See your personal top-played tracks and artists from the last month, 6 months, or all time.</li>
        <li><strong>New Releases:</strong> Browse the latest album and single releases curated for you by Spotify.</li>
        <li><strong>Deep Dives:</strong> From an artist search result, dive into their full discography, or discover related artists.</li>
        <li><strong>Podcast Explorer:</strong> View and play any episode from a podcast you've found.</li>
    </ul>

    <h2>Keyboard Command Center</h2>
    <table>
        <thead>
            <tr>
                <th>Command</th>
                <th>Shortcut</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Play/Pause</td>
                <td><code>NVDA+Shift+Alt+Space</code></td>
            </tr>
            <tr>
                <td>Next Track</td>
                <td><code>NVDA+Shift+Alt+RightArrow</code></td>
            </tr>
            <tr>
                <td>Previous Track</td>
                <td><code>NVDA+Shift+Alt+LeftArrow</code></td>
            </tr>
            <tr>
                <td>Volume Up</td>
                <td><code>NVDA+Shift+Alt+UpArrow</code></td>
            </tr>
            <tr>
                <td>Volume Down</td>
                <td><code>NVDA+Shift+Alt+DownArrow</code></td>
            </tr>
            <tr>
                <td>Set Specific Volume</td>
                <td><code>NVDA+Shift+Alt+V</code></td>
            </tr>
            <tr>
                <td>Seek Forward (configurable)</td>
                <td><code>Control+Alt+NVDA+RightArrow</code></td>
            </tr>
            <tr>
                <td>Seek Backward (configurable)</td>
                <td><code>Control+Alt+NVDA+LeftArrow</code></td>
            </tr>
            <tr>
                <td>Announce Current Track</td>
                <td><code>NVDA+Shift+Alt+I</code></td>
            </tr>
            <tr>
                <td>Announce Playback Time</td>
                <td><code>NVDA+Alt+Shift+T</code></td>
            </tr>
            <tr>
                <td>Copy Track URL</td>
                <td><code>NVDA+Shift+Alt+C</code></td>
            </tr>
            <tr>
                <td>Open Search Dialog</td>
                <td><code>NVDA+Shift+Alt+S</code></td>
            </tr>
            <tr>
                <td>Play from Link Dialog</td>
                <td><code>NVDA+Shift+Alt+P</code></td>
            </tr>
            <tr>
                <td>Open Queue List</td>
                <td><code>NVDA+Shift+Alt+Q</code></td>
            </tr>
            <tr>
                <td>Announce Next in Queue</td>
                <td><code>NVDA+Shift+Alt+N</code></td>
            </tr>
            <tr>
                <td>Save Track to Library</td>
                <td><code>NVDA+Alt+Shift+L</code></td>
            </tr>
            <tr>
                <td>Add Track to Playlist</td>
                <td><code>NVDA+Alt+Shift+A</code></td>
            </tr>
            <tr>
                <td>Open Management Dialog</td>
                <td><code>NVDA+Alt+Shift+M</code></td>
            </tr>
        </tbody>
    </table>

    <hr>

    <h2>Configuration Guide</h2>
    <p>To use this addon, you need to get a <strong>Client ID</strong> and <strong>Client Secret</strong> from the Spotify Developer Dashboard. Follow these steps carefully.</p>

    <h3>Step 1: Create a Spotify App</h3>
    <ol>
        <li>Open the Accessify Play settings in NVDA (NVDA menu -> Preferences -> Settings -> Accessify Play).</li>
        <li>Click the <strong>"Go to Developer Dashboard"</strong> button. This will open the <a href="https://developer.spotify.com/dashboard" target="_blank">Spotify Developer Dashboard</a> in your web browser. Log in if prompted.</li>
        <li>Click the "Create app" button.</li>
        <li>Fill out the form:
            <ul>
                <li><strong>App name:</strong> Give it a name (e.g., "NVDA Controller").</li>
                <li><strong>App description:</strong> A short description is fine.</li>
                <li><strong>Redirect URI:</strong> <span class="warning">This is the most important step.</span> The addon listens on your local machine for the authentication callback. You must enter this URI exactly: <code>http://127.0.0.1:8888/callback</code></li>
            </ul>
        </li>
        <li>You may be asked which API to use. <strong>Please select "Web API"</strong>.</li>
        <li>Agree to the terms and click "Save".</li>
    </ol>

    <h3>Step 2: Get Your Credentials</h3>
    <ol>
        <li>On your new app's dashboard, click "Settings".</li>
        <li>You will see your <strong>Client ID</strong>.</li>
        <li>Copy this long string of text.</li>
    </ol>

    <h3>Step 3: Configure the Addon in NVDA</h3>
    <ol>
        <li>Open the NVDA menu (<code>NVDA+N</code>), go to Preferences, then Settings.</li>
        <li>In the categories list, select "Accessify Play".</li>
        <li>Locate the <strong>"Add Client ID"</strong> (or "Display/Edit Client ID") button. Click it to open a dialog where you can paste your <strong>Client ID</strong>.</li>
        <li>Review the other settings:
            <ul>
                <li><strong>Callback Port:</strong> Only change this if you have a port conflict and you have also changed it in the Spotify Dashboard.</li>
                <li><strong>Announce track changes automatically:</strong> Check this box if you want NVDA to announce every new song as it begins playing.</li>
            </ul>
        </li>
        <li>Press the <strong>"Validate Credentials"</strong> button. Your web browser will open and ask you to grant permissions. Click "Agree".</li>
        <li>If successful, you will see a "Validation successful!" message. If not, carefully re-check all steps, especially the Redirect URI and your Client ID.</li>
        <li>Click "OK" to save and close the settings. The addon is now ready to use!</li>
    </ol>

    <h2>Authentication & Migration Update (Version 1.3.0)</h2>
    <p>With version 1.3.0, Accessify Play has undergone a significant update to its authentication system to enhance security and improve user experience, especially for portable NVDA installations.</p>
    <ul>
        <li><strong>Enhanced Security with PKCE:</strong> The addon now utilizes the Proof Key for Code Exchange (PKCE) authentication flow. This modern and more secure method eliminates the need for a <code>Client Secret</code>, making your Spotify integration safer.</li>
        <li><strong>Portable Client ID Storage:</strong> Your Spotify Client ID is no longer stored within NVDA's configuration files. Instead, it is now saved in a dedicated, portable file located at <code>%userprofile%/.spotify_client_id.json</code>. This ensures your Client ID remains intact even if you move or reinstall NVDA, and it's easier to manage.</li>
        <li><strong>Simplified Settings:</strong> The 'Client Secret' field has been removed from the Accessify Play settings panel, streamlining the setup process. The 'Client ID' input is now managed via a dynamic button that allows you to easily add, view, or edit your Client ID.</li>
        <li><strong>Seamless Migration:</strong> If you are upgrading from an older version of Accessify Play and have your Client ID (or Client Secret) still stored in NVDA's configuration, a new <strong>"Migrate Old Credentials"</strong> button will appear in the Accessify Play settings panel. Clicking this button will automatically:
            <ol>
                <li>Move your existing Client ID to the new portable <code>%userprofile%/.spotify_client_id.json</code> file.</li>
                <li>Remove both the old Client ID and the obsolete Client Secret from NVDA's configuration.</li>
            </ol>
            This ensures a smooth transition to the new, more secure system.
        </li>
    </ul>

    <hr>

    <h2>ðŸ¤” Why This Authentication Method? (Instead of a Simple Login Button)</h2>
    <p>You might be wondering why Accessify Play requires you to create your own Spotify application and input a Client ID, instead of offering a simple "Login to Spotify" button like many other apps (e.g., Alexa, Google Home, etc.). The answer lies in Spotify's API policies and the challenges faced by independent developers.</p>
    <p>To provide a seamless "Login to Spotify" experience without requiring users to become "mini-developers," an application needs to apply for and be granted an <strong>Extended Quota</strong> from Spotify. The requirements for obtaining such an extended quota are quite extraordinary and often include:</p>
    <ul>
        <li><strong>Significant User Base:</strong> Demonstrating a large and active user base.</li>
        <li><strong>Business Model:</strong> A clear and sustainable business model.</li>
        <li><strong>Legal & Security Reviews:</strong> Extensive legal and security reviews by Spotify.</li>
        <li><strong>Brand Alignment:</strong> Strong alignment with Spotify's brand and strategic goals.</li>
    </ul>
    <p>For a small, independent, and open-source accessibility addon like Accessify Play, meeting these stringent requirements is <strong>almost impossible</strong>. The resources, legal overhead, and user base needed are far beyond what this project can realistically achieve.</p>
    <p>Therefore, the current method, while requiring a few extra steps from the user, is a necessary workaround. It allows Accessify Play to function and provide its valuable accessibility features by leveraging Spotify's standard developer access, without needing to meet the prohibitive criteria for extended quotas. This approach empowers you, the user, to directly control your Spotify API access, ensuring the addon remains functional and accessible.</p>

    <hr>

    <h2>Acknowledgements</h2>
    <p>This project wouldn't be where it is today without the incredible support and dedication of our community. A heartfelt thank you to all the testers who provided invaluable ideas, helped tirelessly with debugging, and offered supportive encouragement throughout the development process. Your contributions have been instrumental in shaping Accessify Play into what it is. Thank you for making this project a success!</p>

    <hr>

    <div class="center">
        <h2>Support the Developer</h2>
        <p>If you find this addon useful, please consider supporting its development. Every little bit helps!</p>
        <p><a href="https://www.paypal.com/paypalme/rafli23115" target="_blank">Donate via PayPal</a></p>
        <p>For alternative donation methods, please contact: <a href="mailto:rafli08523717409@gmail.com">rafli08523717409@gmail.com</a></p>
    </div>

</div>

</body>
</html>